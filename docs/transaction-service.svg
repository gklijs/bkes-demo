<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="642px" preserveAspectRatio="none" style="width:2186px;height:642px;" version="1.1" viewBox="0 0 2186 642" width="2186px" zoomAndPan="magnify"><defs/><g><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="74" cy="472.6953" fill="#FFFFFF" rx="16" ry="16" style="stroke:#A80036;stroke-width:3.0;"/><path d="M74,488.6953 L74,542.6953 M48,504.6953 L100,504.6953 M74,542.6953 L48,572.6953 M74,542.6953 L100,572.6953 " fill="none" style="stroke:#A80036;stroke-width:3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="124" x="12" y="625.9375">client</text><!--MD5=[258314007039b30ebcefe7c7c852ef43]
entity qb--><rect fill="#FFFF00" height="120.9375" style="stroke:#A80036;stroke-width:3.0;" width="306" x="1575" y="485.6953"/><rect fill="#FFFF00" height="20" style="stroke:#A80036;stroke-width:3.0;" width="30" x="1841" y="495.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1837" y="499.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1837" y="507.6953"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="226" x="1605" y="573.9375">query-bus</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" height="120.9375" style="stroke:#A80036;stroke-width:3.0;" width="312" x="626" y="89.6953"/><rect fill="#FFFF00" height="20" style="stroke:#A80036;stroke-width:3.0;" width="30" x="898" y="99.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="894" y="103.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="894" y="111.6953"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="232" x="656" y="177.9375">consumer</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" height="120.9375" style="stroke:#A80036;stroke-width:3.0;" width="206" x="1653" y="89.6953"/><rect fill="#D3D3D3" height="20" style="stroke:#A80036;stroke-width:3.0;" width="30" x="1819" y="99.6953"/><rect fill="#D3D3D3" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1815" y="103.6953"/><rect fill="#D3D3D3" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1815" y="111.6953"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="126" x="1683" y="177.9375">kafka</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" height="120.9375" style="stroke:#A80036;stroke-width:3.0;" width="470" x="677" y="485.6953"/><rect fill="#FFFF00" height="20" style="stroke:#A80036;stroke-width:3.0;" width="30" x="1107" y="495.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1103" y="499.6953"/><rect fill="#FFFF00" height="4" style="stroke:#A80036;stroke-width:3.0;" width="8" x="1103" y="507.6953"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="390" x="707" y="573.9375">schema-provider</text><!--MD5=[ce416eb35adc1d8056c0af1bbec5e02c]
link cl to sp--><path d="M146.54,545.6953 C260.98,545.6953 488.68,545.6953 666.12,545.6953 " fill="none" id="cl-sp" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="676.12,545.6953,658.12,537.6953,666.12,545.6953,658.12,553.6953,676.12,545.6953" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="136.3,545.6953,154.3,553.6953,146.3,545.6953,154.3,537.6953,136.3,545.6953" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="468" x="172.5" y="465.9375">queries or subscribe</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="342" x="172.5" y="526.875">to transactions</text><!--MD5=[4793aab74a9e416034a94c267a8ee1d4]
link sp to qb--><path d="M1158,545.6953 C1289.54,545.6953 1447.9,545.6953 1564.28,545.6953 " fill="none" id="sp-qb" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1574.7,545.6953,1556.7,537.6953,1564.7,545.6953,1556.7,553.6953,1574.7,545.6953" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1147.48,545.6953,1165.48,553.6953,1157.48,545.6953,1165.48,537.6953,1147.48,545.6953" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="302" x="1210" y="525.9375">issue queries</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M948.6,149.6953 C1150.68,149.6953 1485.04,149.6953 1653,149.6953 " fill="none" id="c-backto-kc" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="938.48,149.6953,956.5028,157.6439,948.48,149.6667,956.4571,141.6439,938.48,149.6953" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="240" x="1175.5" y="69.9375">consumes</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="642" x="974.5" y="130.875">TransactionHappenedEvent</text><!--MD5=[a9e274f941e496d3d2b249e342953251]
link c to sp--><path d="M801.46,210.3753 C824.98,281.3153 864.5,400.4553 889.36,475.4353 " fill="none" id="c-to-sp" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="892.62,485.2553,894.5704,465.6544,889.4834,475.76,879.3778,470.673,892.62,485.2553" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="382" x="940" y="319.9375">send transaction</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="538" x="862" y="380.875">for active subscriptions</text><!--MD5=[a8234c2fcd3479c79e2dfcf8c7139531]
link kc to qb--><path d="M1751.04,221.1353 C1745.92,292.7353 1738,403.7153 1732.9,475.0153 " fill="none" id="kc-qb" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1732.18,485.2553,1741.4457,467.8729,1732.8945,475.2809,1725.4865,466.7297,1732.18,485.2553" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1751.8,210.3753,1742.5343,227.7577,1751.0855,220.3498,1758.4935,228.9009,1751.8,210.3753" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="294" x="1812" y="319.9375">send queries</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacing" textLength="422" x="1748" y="380.875">receives feedback</text><!--MD5=[f4a3a623cad95542c611dc225171b275]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26

actor client as cl #White
component "query-bus" as qb #Yellow
component consumer as c #Yellow
component kafka as kc #LightGrey
component "schema-provider" as sp #Yellow

cl <-> sp :queries or subscribe\lto transactions
sp <-> qb :issue queries
c <- kc :consumes\nTransactionHappenedEvent
c - -> sp :send transaction\nfor active subscriptions
qb <-up-> kc: send queries\nreceives feedback

@enduml

PlantUML version 1.2021.01(Tue Feb 02 08:55:08 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>