<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="626.4px" preserveAspectRatio="none" style="width:978px;height:626px;" version="1.1" viewBox="0 0 978 626" width="978px" zoomAndPan="magnify"><defs/><g><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="44.4" cy="83.2172" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke:#A80036;stroke-width:1.7999999999999998;"/><path d="M44.4,92.8172 L44.4,125.2172 M28.8,102.4172 L60,102.4172 M44.4,125.2172 L28.8,143.2172 M44.4,125.2172 L60,143.2172 " fill="none" style="stroke:#A80036;stroke-width:1.7999999999999998;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="74.4" x="7.2" y="175.1625">client</text><!--MD5=[258314007039b30ebcefe7c7c852ef43]
entity qb--><rect fill="#FFFF00" height="72.5625" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="183.6" x="334.2" y="328.6172"/><rect fill="#FFFF00" height="12" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="18" x="493.8" y="334.6172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="491.4" y="337.0172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="491.4" y="341.8172"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="135.6" x="352.2" y="381.5625">query-bus</text><!--MD5=[b1bb34d5f6a5f9f0e50b702338f741d1]
entity cb--><rect fill="#FFFF00" height="72.5625" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="248.4" x="570.6" y="328.6172"/><rect fill="#FFFF00" height="12" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="18" x="795" y="334.6172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="792.6" y="337.0172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="792.6" y="341.8172"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="200.4" x="588.6" y="381.5625">command-bus</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" height="72.5625" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="282" x="418.2" y="91.0172"/><rect fill="#FFFF00" height="12" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="18" x="676.2" y="97.0172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="673.8" y="99.4172"/><rect fill="#FFFF00" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="673.8" y="104.2172"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="234" x="436.2" y="143.9625">schema-provider</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" height="72.5625" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="123.6" x="492.6" y="547.0172"/><rect fill="#D3D3D3" height="12" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="18" x="592.2" y="553.0172"/><rect fill="#D3D3D3" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="589.8" y="555.4172"/><rect fill="#D3D3D3" height="2.4" style="stroke:#A80036;stroke-width:1.7999999999999998;" width="4.8" x="589.8" y="560.2172"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="75.6" x="510.6" y="599.9625">kafka</text><!--MD5=[ce416eb35adc1d8056c0af1bbec5e02c]
link cl to sp--><path d="M88.164,127.0172 C158.928,127.0172 301.632,127.0172 411.528,127.0172 " fill="none" id="cl-sp" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="417.72,127.0172,406.92,122.2172,411.72,127.0172,406.92,131.8172,417.72,127.0172" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="81.84,127.0172,92.64,131.8172,87.84,127.0172,92.64,122.2172,81.84,127.0172" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="223.2" x="103.5" y="41.9625">request account</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="152.4" x="103.5" y="78.525">via graphql</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="292.8" x="103.5" y="115.0875">needs token and iban</text><!--MD5=[4793aab74a9e416034a94c267a8ee1d4]
link sp to qb--><path d="M499.74,163.2452 C480.096,177.7892 460.092,196.4012 447.6,218.2172 C429.456,249.9092 424.86,291.6212 424.32,322.2092 " fill="none" id="sp-to-qb" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="424.272,328.5572,429.1644,317.7987,424.3234,322.5574,419.5647,317.7164,424.272,328.5572" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="174" x="448.8" y="248.3625">gets existing</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="60" x="505.8" y="284.925">user</text><!--MD5=[f331b4fcee3befa7b35fa98b9e8c96fb]
link sp to cb--><path d="M589.308,163.1972 C602.364,179.3252 617.28,199.1012 628.8,218.2172 C649.104,251.9012 667.188,292.9052 679.272,322.7372 " fill="none" id="sp-to-cb" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="681.612,328.5452,682.0577,316.735,679.3837,322.9743,673.1443,320.3003,681.612,328.5452" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="267.6" x="684.6" y="248.3625">crate new user, and</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="300" x="668.4" y="284.925">bank account for user</text><!--MD5=[5779747e1fee51be4564702ca0fe01bf]
link qb to kc--><path d="M404.088,406.4252 C390.66,437.3372 379.524,479.7572 399.6,511.0172 C418.848,540.9812 454.272,558.4172 486.384,568.4972 " fill="none" id="qb-kc" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="492.336,570.2852,483.3813,562.572,486.5914,568.5532,480.6102,571.7633,492.336,570.2852" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="406.608,400.7852,397.8102,408.6768,404.1537,406.2602,406.5702,412.6038,406.608,400.7852" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="176.4" x="439.2" y="466.7625">send queries</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="253.2" x="400.8" y="503.325">receives feedback</text><!--MD5=[c6199938c050830569718a53452a9416]
link cb to kc--><path d="M692.94,406.7372 C689.76,437.7692 681.444,480.1892 660,511.0172 C650.016,525.3812 636.084,537.6332 621.612,547.7132 " fill="none" id="cb-kc" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="616.26,551.3252,627.8958,549.2545,621.2311,547.9654,622.5202,541.3007,616.26,551.3252" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="693.516,400.6892,687.7206,410.9894,692.9512,406.6625,697.278,411.8931,693.516,400.6892" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="231.6" x="700.8" y="466.7625">send commands</text><text fill="#000000" font-family="Roboto" font-size="31.2" lengthAdjust="spacing" textLength="253.2" x="690" y="503.325">receives feedback</text><!--MD5=[6403ca964917af54678a64433f75fe10]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26

actor client as cl #White
component "query-bus" as qb #Yellow
component "command-bus" as cb #Yellow
component "schema-provider" as sp #Yellow
component "kafka" as kc #LightGrey

cl <-right-> sp :request account\lvia graphql\nneeds token and iban
sp - -> qb: gets existing\nuser
sp - -> cb: crate new user, and\nbank account for user
qb <-down-> kc: send queries\nreceives feedback
cb <- -> kc: send commands\nreceives feedback

@enduml

PlantUML version 1.2021.01(Tue Feb 02 08:55:08 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>